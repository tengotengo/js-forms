Forms=function(){function Z(a,b){if(typeof a==typeof b&&("string"==typeof b||"number"==typeof b))return a!=b;if("object"==typeof a&&"object"==typeof b&&null!==a&&null!==b){var c;for(c in a)if(Z(a[c],b[c]))return!0;for(c in b)if(Z(a[c],b[c]))return!0}else if(typeof a!=typeof b)return!0;return!1}function $(){throw new Error(Array.prototype.slice.call(arguments).join(", "))}function _(){console.log(Array.prototype.slice.call(arguments).join(", "))}function ab(a,b){if(a){var c=function(a,b){var c=a.tagName.toLowerCase();switch(c){case"select":for(var g,d=a.children,e=!1,f=0;g=d[f];f++)b!=g.value?(g.removeAttribute("selected"),g.selected=!1):(g.setAttribute("selected","1"),g.selected=!0,e=!0);e||(a.selectedIndex=-1);break;case"input":switch(a.type){case"radio":b==a.value?(a.setAttribute("checked","true"),a.checked=!0):(a.removeAttribute("checked"),a.checked=!1);break;case"password":case"hidden":case"text":"object"==typeof b?(a.setAttribute("value",b),a.value=b):(a.setAttribute("value",b),a.value=b);break;case"checkbox":var h=a.hasAttribute("bitmask");h&&a.value&b||b&&"0"!==b&&"!1"!==b&&!h?(a.setAttribute("checked","true"),a.checked=!0):(a.removeAttribute("checked"),a.checked=!1)}break;case"textarea":a.innerHTML=b,a.value=b}};if("object"==typeof b&&a.length)for(var e,d=0;e=a[d];d++)c(e,null!==b&&b[d]?b[d]:null);else if(!a.length||a.tagName)c(a,b);else for(var e,d=0;e=a[d];d++)c(e,b)}}function fb(a,b){var c={};if(!a.length)return c;for(var e,d=0;e=a[d];d++){var f=e.name,g=function(a){var b=a.name,c=a.type,d=a.tagName.toLowerCase();if(!b||a.disabled||"reset"==c||"button"==c||("checkbox"==c||"radio"==c)&&!a.checked||("submit"==c||"image"==c)&&a.form&&a.form.clk!=a||"select"==d&&-1==a.selectedIndex)return null;switch(d){case"select":var e=a.selectedIndex;if(0>e)return null;for(var f=[],g=a.options,h="select-one"==c,i=h?e+1:g.length,j=h?e:0;i>j;j++){var k=g[j];if(k.selected){var l=k.value;if(l||(l=k.attributes&&k.attributes.value&&!k.attributes.value.specified?k.text:k.value),h)return l;f.push(l)}}return f;case"input":switch(c){case"radio":return""===a.value?null:a.value;case"checkbox":return a.hasAttribute("value")?""===a.value?1:a.value:1;case"text":case"password":case"hidden":return""===a.value?null:a.value}break;case"textarea":return""===a.value?null:a.value}return!1};if(f&&!e.disabled&&!cb(e,"default-text")){var h=g(e);b&&void 0===eb.get(f,c)&&null===h&&eb.set(f,null,c),null!==h&&(b||""!==h&&null!==h&&void 0!==h)&&(e.hasAttribute("bitmask")?(h=parseInt(h,10)||0,(0!==h||b)&&(c[f]|=h)):eb.set(f,h,c))}}return c}function gb(a,b,c){var d=document.createElement(c.toUpperCase());return d.setAttribute("class","form_"+b+"_"+a),d.setAttribute("name",a),d}function hb(a){var b=document.createElement("SPAN");return b.className=a,bb(b,d.hideClass),b}function ib(a,b,c){return a.addEventListener?(a.addEventListener(b,c,!1),!0):a.attachEvent?a.attachEvent("on"+b,c):(b="on"+b,"function"==typeof a[b]&&(c=function(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}(a[b],c)),a[b]=c,!0)}function jb(a){if(!(a.config[l]&h))return a.submit=function(b){a.container.submit(b)},void 0;var b=function(){var b=arguments[arguments.length-1],c="function"==typeof b?b:function(){},e=a.config[o]||d.submitCallback,f=a.config[y]||d.validateCallback,g=a.config[n]||d.beforeSubmitCallback,h=a.config[s]||d.afterSubmitCallback,i=a.config[m]||function(b){b=b||function(){};var c=a.validate();if(f(c),c){var g=a.getFormData();if(a.config[C])for(var h in a.config[C])g[h]=a.config[C][h];return d.ajax(a.action,"POST",g,function(b){return function(c,d){e.call(a,c,d,b)}}(b)),a.saveChanges(),!0}return!1};g(function(){i(c)&&h()})};a.container.submit=a.submit=b,ib(a.container,"submit",function(a){return a.preventDefault&&a.preventDefault(),b(),a.returnValue=!1,!1})}function kb(a,b){if(void 0!==a){var c;if(document.createEvent){if(c=document.createEvent("MouseEvents"),c.initEvent(b,!0,!1),a.length&&void 0==a.name){for(var d=0;d<a.length;d++)a[d].dispatchEvent(c);return}a.dispatchEvent(c)}else if(document.createEventObject){if(c=document.createEventObject(),void 0===a.fireEvent||"function"!=typeof a.fireEvent)return;a.fireEvent("on"+b,c)}}}function lb(a){var b=!this.elements;b&&(this.elements={});for(var d,c=0;d=this.container[c];c++)b&&(this.elements[d.name]?"[object Array]"===Object.prototype.toString.call(this.elements[d.name])?this.elements[d.name].push(d):this.elements[d.name]=Array.prototype.concat(this.elements[d.name],d):this.elements[d.name]=d),a(d)}function mb(a,b,c){var d;if(!a.allChildren){a.allChildren={};for(var g,e=a.getElementsByTagName("*"),f=0;g=e[f];f++)a.allChildren[g.className]=a.allChildren[g.className]||[],a.allChildren[g.className].push(g)}return d=a.allChildren["form_"+c+"_"+b],d?d&&void 0===d.length?d:1==d.length?d[0]:d[0]?d:null:null}function nb(b,c,e,f,g){if(f=f||!1,e=e||!1,g=g||d.templateFast,c){var h=b.container;b.errorContainers={},b.warningContainers={},b.fieldContainers={};var k=function(a,b){var c=document.createElement("LABEL");return c.innerHTML=a,c.setAttribute("for",b),c};for(var l in c){var m=l+"",n=c[m],o=n[F];if(o&&(b.fieldContainers[m]=mb(h,m,L),b.fieldContainers[m])){b.fieldContainers[m].innerHTML="",r=e?m+"-"+a++:m;var p=mb(h,m,O);if(n.label&&p){p.innerHTML="";var q=k(n.label,r);f&&q.setAttribute("title",m),p.appendChild(q)}var r,s={};n.data?s=n.data:n.label?s[n.label]=null:s[""]=null,b.fieldContainers[m].innerHTML=function(a,b,c,d,e,f){var g=[],h=1,i=0;for(var j in a)i++;var k=i>=2;for(var l in a){var n,m=b+(k?"-"+h:""),o={},p=null===a[l]?"":a[l];"select"==c?(0!==j&&(n='<option value=""></option>',g.push({input:n}),j=0),n='<option value="'+p+'">'+l+"</option>"):(n="text"==c||"hidden"==c||"password"==c||"checkbox"==c||"radio"==c?'<input type="'+c+'" name="'+d+'" id="'+m+'" error-id="'+b+'" value="'+p+'" />':'<textarea name="'+d+'" id="'+m+'" error-id="'+b+'" >'+p+"</textarea>",o.label=e?"":'<label for="'+m+'">'+l+"</label>"),o.input=n,g.push(o),h++}return f[c]?f[c](d,b,g):g[0].input}(s,r,o,m,!!p,g)}}}}function ob(a,b){var c=this.notificationContainers[a];if(void 0===c[b]){var e=mb(this.container,b,a);if(!e){if(!this.fieldContainers[b])return;e=gb(b,a,this.fieldContainers[b].tagName),this.fieldContainers[b].parentNode.insertBefore(e,this.fieldContainers[b].nextSibling)}e.children.length||e.appendChild(hb(this.config[a+"Class"]||d.classes[a])),c[b]=e}return this.notificationContainers[a][b].children[0]}function pb(){lb.call(this,function(a){this.setField(a.name,"")}.bind(this))}Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),String.prototype.supplant=function(a,b){return this.replace(/{([^{}]*)}/g,function(c,d){return void 0!=a[d]?a[d]:b?"":c})};var a=1,b={},d={hideClass:"h",classes:{error:"error",warning:"warning"},errorClass:"error",warningClass:"warning",templateFast:{select:function(a,b,c){for(var d='<select name="'+a+'" id="'+b+'">',e=0;e<c.length;e++)d+=c[e].input;return d+="</select>"},radio:function(a,b,c){for(var d='<table cellpadding="0" cellspacing="0" class="radio-table">',e=0;e<c.length;e++)d+='<tr><td class="radiobutton">'+c[e].input+"</td>"+'<td class="radio_label">'+c[e].label+"</td>"+"</tr>";return d+="</table>"},checkbox:function(a,b,c){for(var d='<table cellpadding="0" cellspacing="0" class="checkbox-table">',e=0;e<c.length;e++)d+='<tr><td class="checkbox">'+c[e].input+"</td>"+'<td class="checkbox_label">'+c[e].label+"</td>"+"</tr>";return d+="</table>"}},ajax:function(a,b,c,d,e){var f=new XMLHttpRequest;e=e||function(){},f.open(b,a),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.send(eb.serialize(c,null)),f.onreadystatechange=function(){200==f.status&&4==f.readyState&&d(f.response),200!=f.status&&e()}},onChange:function(){},formContext:function(){},fieldContext:function(){},submitCallback:function(a,b,c){return c(),!0},validateCallback:function(){return!0},beforeSubmitCallback:function(a){return a(),!0},afterSubmitCallback:function(){return!0}},e=1,f=2,g=4,h=8,i="id",j="obj",l="flags",m="onSubmit",n="beforeSubmit",o="submitCallback",s="afterSubmit",t="fields",u="validationType",v="onFieldChange",w="onChange",x="onInit",y="onValidate",z="validate",A="data",B="templates",C="params",D="action",E="attributes",F="type",G="validate",H="class",I="bitmask",J="disabled",K="warning",L="field",M="warning",N="error",O="label",P="No configuration passed",Q="Form is initialized already",R="No such element on the page",S=1,T=2,U=3,V=2,W=0,X=1,Y={setWarningMessage:function(a,b){Y.methods[a]||(Y.methods[a]=[]),Y.methods[a][X]=b},setErrorMessage:function(a,b){Y.methods[a]||(Y.methods[a]=[]),Y.methods[a][W]=b},setTestFunction:function(a,b){Y.methods[a]||(Y.methods[a]=[]),Y.methods[a][V]=b},set:function(a,b){Y.methods[a]=b},remove:function(a){delete Y.methods[a]},methods:{multiple:["Must be a multiple of {val}","Should be a multiple of {val}",function(a,b){return 0===a%b}],email:["Wrong email format","Bad email format",function(a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)}],"int":["Must be an integer","Should be an integer",function(a){return parseInt(a,10)==a}],"float":["Must be a decimal","Should be a decimal",function(a){return/^-?\d{0,}([\.|\,]\d{0,})?$/.test(a)}],min:["Must be >= {val}","Value is lower than {val}",function(a,b){return(parseFloat(a)||0)>=(parseFloat(b)||0)}],max:["Must be <= {val}","Value is higher than {val}",function(a,b){return(parseFloat(a)||0)<=(parseFloat(b)||0)}],date:["Wrong date format","Bad date format",function(a){return/^([1-9]|0[1-9]|1[012])[- \/.](0[1-9]|[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d$/.test(a)}],length:["Must be {val} characters long","Should be {val} characters long",function(a,b){return a.length==b}],maxLength:["Must be <= {val} characters long","Should be less than {val} characters long",function(a,b){return a.length<=b}],minLength:["Must be >= {val} characters long","Should be more than {val} characters long",function(a,b){return a.length<=b}],required:["Required field","This field is highly recommended to fill",function(a){return!(""==a||null==a||void 0==typeof a)}]},hideError:function(a){a&&bb(a,d.hideClass)},showError:function(a,b){a&&(a.innerHTML=b,db(a,d.hideClass))},field:function(a,b,c,d,e,f){var g=!0,h=!0;if(c[G])for(var i in c[G])if(Object.prototype.hasOwnProperty.call(c[G],i)&&void 0!=Y.methods[i]){if(("required"==i||""!=d&&null!==d&&void 0!==typeof d)&&(g=Y.methods[i][V](d,c[G][i])),!g){Y.showError(a.getErrorContainer(b),Y.methods[i][W].supplant({val:c[G][i]})),a.elements[b]&&void 0!==a.elements[b].name&&bb(a.elements[b],e),h=!1,console.log(b,"is not valid");break}a.notificationContainers[N][b]&&Y.hideError(a.getErrorContainer(b)),a.elements[b]&&void 0!==a.elements[b].name&&db(a.elements[b],e)}if(c[K])for(var i in c[K])if(Object.prototype.hasOwnProperty.call(c[K],i)&&Y.methods[i])if(h){if(("required"==i||""!=d&&null!==d&&void 0!==typeof d)&&(g=Y.methods[i][V](d,c[K][i])),!g){Y.showError(a.getWarningContainer(b),Y.methods[i][X].supplant({val:c[K][i]})),a.elements[b]&&void 0!==a.elements[b].name&&bb(a.elements[b],f);break}a.notificationContainers[M][b]&&Y.hideError(a.getWarningContainer(b)),a.elements[b]&&void 0!==a.elements[b].name&&db(a.elements[b],f)}else a.notificationContainers[M][b]&&Y.hideError(a.getWarningContainer(b));return h},process:function(a,b){var c=a.getFormData(1),e=!0;for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(b[f][G]||b[f][K])&&(Y.field(a,f,b[f],c[f],a.config.errorClass||d.classes.error,a.config.warningClass||d.classes.warning)||(e=!1));return e}},bb=function(a,b){cb(a,b)||(a.className=(a.className+" "+b).trim())},cb=function(a,b){return new RegExp("( |^)"+b+"( |$)","g").test(a.className)},db=function(a,b){var c=new RegExp("( |^)"+b+"( |$)","g");a.className=a.className.replace(c,function(a,b,c){return b==c?c:""})},eb={allReg:/\[([a-zA-Z0-9-]*)\]/g,isObjReg:/\[(.*)\]/g,getPath:function(a){var b=a.replace(eb.isObjReg,""),c=[];b&&c.push(b);for(var d;d=eb.allReg.exec(a);)c.push(d[1]);return c},serialize:function(a,b){var c=[];for(var d in a){var e=b?b+"["+d+"]":d,f=a[d];c.push("object"==typeof f&&null!==f?eb.serialize(f,e):encodeURIComponent(e)+"="+(null===f?"":encodeURIComponent(f)))}return c.join("&")},getOrDel:function(a,b,c){var d=this.getPath(a);if(void 0===b||void 0===b[d[0]])return void 0;for(var f,g,e=b,h=0;h<d.length;h++)if(void 0!==e[d[h]]){if(""==e[d[h]])return c?delete e[d[h]]:e[d[h]];f=e,g=d[h],e=e[d[h]]}return c?delete f[g]:e},del:function(a,b){return this.getOrDel(a,b,!0)},get:function(a,b){return this.getOrDel(a,b)},setVal:function(a,b,c){if(a.length){var d=a.shift(),e=a[0],f=c;if(void 0===e){if(""==d)return c.push?(c.push(b),void 0):!1;if(void 0===c)return;return c[d]=b,void 0}""==d&&(f.push||(f=[]),f.push(""==e?[]:{}),d=f.length-1),f=f[d]="object"==typeof f[d]&&null!==f[d]?f[d]:""==e?[]:{},eb.setVal(a,b,f)}},set:function(a,b,c){var d=this.getPath(a);eb.setVal(d,b,c)}};return function(a,b){void 0!==window.Element&&(a[b]||(a[b]=function(a){return this.querySelectorAll("."+a)},Element.prototype[b]=a[b]))}(document,"getElementsByClassName"),{Form:function(a){function k(a){return!!a}var c={cache:null,config:a||null,initialized:!1,container:null},h=this;if(h.init=function(a){return c.initialized?(_(Q),!1):(k(a)||$(P),c.config=a,c.initialized=!0,!0)},h.isChanged=!1,h.config=c.config,!k(c.config))return _(P),void 0;if(c.config[i]&&(c.container=document.getElementById(c.config[i]),c.container||$(R,c.config[i]),h.container=c.container),c.config[j]&&(h.container=c.container=c.config[j],c.config[i]=h.container.getAttribute("id")),h.container){var m=null,n=!!(c.config[l]&g);h.getFormData=function(a){return!m||h.isChanged||a?m=fb(h.container,n):cloneObject(m)},c.config[D]&&c.container.setAttribute(D,c.config[D]),h.differsObj={},h.prevValues={},h.valuesCache={},h.action=c.container.getAttribute("action"),h.setField=function(a,b){h.elements[a]&&(ab(h.elements[a],b),kb(h.elements[a],"formChange"))},h.getField=function(a){return h.elements[a]},h.validate=function(a){if(a){var b=h.getFormData(!0);return Y.field(h,a,h.config[t][a],b[a],h.config.errorClass||d.classes.error,h.config.warningClass||d.classes.warning)}return h.config[z]?h.config[z](h,h.getFormData(1)):Y.process(h,c.config[t])},h.clear=pb.bind(h),h.notificationContainers={},h.notificationContainers[N]={},h.notificationContainers[M]={},h.getErrorContainer=function(a){return ob.call(h,N,a)},h.getWarningContainer=function(a){return ob.call(h,M,a)},h.lastChangedStatus=!1,h.initInputs=function(){var a=0,b=c.config[t]||{},e=c.config[A],f=c.config[u]||Forms.VALIDATION_ON_SUBMIT,g=this.config[w]||d.onChange,i=this.config[v]||function(){console.log("fieldChange fired",arguments)},j=function(a,b,c){switch(c){case Forms.VALIDATION_ON_CHANGE:"blur"==a.type&&this.validate(b);break;case Forms.VALIDATION_ON_KEYUP:this.validate(b)}var d=eb.get(b,this.valuesCache),e=eb.get(b,this.getFieldValue(b)),f=eb.get(b,this.prevValues);Z(d,e)?eb.set(b,!0,this.differsObj):eb.del(b,this.differsObj),this.isChanged=Z(this.differsObj,{}),this.isChanged!=this.lastChangedStatus&&(g(this.isChanged,this),this.lastChangedStatus=!!this.isChanged),Z(f,e)&&(i(b,e),eb.set(b,e,this.prevValues))};lb.call(h,function(c){void 0===c.hasAttribute&&(c.hasAttribute=function(a){return"undefined"!=typeof this[a]}),function(){(!c.type||"hidden"!=c.type&&"disabled"!=c.type)&&(c.setAttribute("tabindex",++a),c.formIndex=c.formIndex||a)}();var d=c.name,g=eb.get(d,e);if(b[d]){void 0!==b[d].defaultVal&&void 0===g&&(ab(c,b[d].defaultVal),eb.set(d,b[d].defaultVal,h.prevValues));for(var i in b[d]){var k=null;switch(i){case J:case I:if(c.length)for(var m,l=0;m=c[l];l++)m.setAttribute(i,"1");else c.setAttribute(i,"1");break;case E:k=b[d][i];for(var n in k)c.setAttribute(n,k[n]);break;case H:if(k=b[d][i],"string"==typeof k)bb(c,k);else try{for(var l=0;l<k.length;l++)bb(c,k[l])}catch(o){}}}}if(void 0!==g&&null!==g&&(ab(c,g),eb.set(d,g,h.prevValues)),!c.initialized){var p=function(a){return function(b){j.call(this,b,a,f)}.bind(this)}.call(h,c.name);ib(c,"blur",p),ib(c,"click",p),ib(c,"keyup",p),ib(c,"formChange",p),c.initialized=!0}})},h.saveChanges=function(){h.differsObj={},h.lastChangedStatus=!1,h.prevValues=h.getFormData(),h.valuesCache=h.getFormData(),(c.config[w]||d.onChange)(!1,h),h.isChanged=!1},nb(h,c.config[t],!!(c.config[l]&e),!!(c.config[l]&f),c.config[B]),h.getFieldValue=function(a){return h.elements[a]?fb(Array.prototype.concat(h.elements[a]),n):void 0},h.initInputs(),c.config[x]&&c.config[x](h),jb(h),h.saveChanges(),c.config[u]===U&&h.validate(),h.remove=function(){Forms.remove(c.config[i])},h.remove(),b[c.config[i]]=h}},VALIDATION_ON_SUBMIT:S,VALIDATION_ON_CHANGE:T,VALIDATION_ON_KEYUP:U,FLAG_DEBUG:f,FLAG_SUBMIT_EMPTY:g,FLAG_UNIQUE_LABELS:e,FLAG_ASYNC:h,defaults:d,remove:function(a){b[a]&&delete b[a]},validation:{setWarningMessage:Y.setWarningMessage,setErrorMessage:Y.setErrorMessage,setTestFunction:Y.setTestFunction,set:Y.set,remove:Y.remove},getList:function(){return b}}}();