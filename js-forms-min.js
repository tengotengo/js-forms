Forms=function(){function e(){throw Error(Array.prototype.slice.call(arguments).join(", "))}function t(){console.log(Array.prototype.slice.call(arguments).join(", "))}function n(e){if(!(e.config[O]&w))return void(e.submit=function(t){e.container.submit(t)});var t=function(){var t=arguments[arguments.length-1],n="function"==typeof t?t:function(){},a=e.config[j]||e.defaults.submitCallback,i=e.config[V]||e.defaults.validateCallback,o=e.config[D]||e.defaults.beforeSubmitCallback,l=e.config[F]||e.defaults.afterSubmitCallback,s=e.config[N]||function(t){t=t||function(){},e.currentData=r(e.container);var n=e.validate();if(i(n),n){if(e.config[P])for(var o in e.config[P])ft.set(o,e.config[P][o],e.currentData);return e.defaults.ajax(e.action,"POST",e.currentData,function(t){return function(n,i){n&&e.saveChanges(),a.call(e,n,i,t)}}(t)),!0}return!1};o(function(){s(n)&&l()})};e.container.submit=e.submit=t,p(e.container,"submit",function(e){return e.preventDefault&&e.preventDefault(),t(),e.returnValue=!1,!1})}function a(e,t,n,a){var i="";switch(e){case"select":i='<select name="'+t+'" id="'+n+'">';for(var r,o=0;r=a[o];o++)i+=r.input;i+="</select>";break;case"radio":case"checkbox":i='<table cellpadding="0" cellspacing="0" class="forms-'+e+'-table">';for(var r,o=0;r=a[o];o++)i+='<tr><td class="forms-'+e+'">'+r.input+'</td><td class="forms-label-'+e+'">'+r.label+"</td></tr>";i+="</table>";break;default:return!1}return i}function i(e){var t=e.name,n=e.type,a=e.tagName.toLowerCase();if(!t||e.disabled||"reset"==n||"button"==n||"radio"==n&&!e.checked||("submit"==n||"image"==n)&&e.form&&e.form.clk!=e||"select"==a&&-1==e.selectedIndex)return null;switch(a){case"select":var i=e.selectedIndex;if(0>i)return null;for(var r=[],o=e.options,l="select-one"==n,s=l?i+1:o.length,c=l?i:0;s>c;c++){var u=o[c];if(u.selected){var f=u.value;if(f||(f=u.attributes&&u.attributes.value&&!u.attributes.value.specified?u.text:u.value),l)return f;r.push(f)}}return r.join(",");case"input":switch(n){case"radio":return""===e.value?null:e.value;case"checkbox":return e.checked?e.value||"1":"";case"text":case"password":case"hidden":return e.value}break;case"textarea":return e.value;default:return null}}function r(e){var t={};if(!e.length)return t;for(var n,a=0;n=e[a];a++){var r=n.name;if(r&&!n.disabled&&!f(n,"default-text")){var o=i(n);void 0===ft.get(r,t)&&null===o&&ft.set(r,null,t),null!==o&&(n.hasAttribute("bitmask")?(o=parseInt(o,10)||0,o|=ft.get(r,t),ft.set(r,o,t)):ft.set(r,o,t))}}return t}function o(e,t){if(e){var n=function(e,t){var n=e.tagName.toLowerCase();switch(n){case"select":for(var a,i=e.children,r=!1,o=0;a=i[o];o++)t!=a.value?(a.removeAttribute("selected"),a.selected=!1):(a.setAttribute("selected","1"),a.selected=!0,r=o);e.selectedIndex=r===!1?-1:r;break;case"input":switch(e.type){case"radio":t==e.value?(e.setAttribute("checked","true"),e.checked=!0):(e.removeAttribute("checked"),e.checked=!1);break;case"password":case"hidden":case"text":e.setAttribute("value",null===t?"":t),e.value=null===t?"":t;break;case"checkbox":var l=e.hasAttribute("bitmask");l&&e.value&t||t&&"0"!==t&&"!1"!==t&&!l?(e.setAttribute("checked","true"),e.checked=!0):(e.removeAttribute("checked"),e.checked=!1)}break;case"textarea":e.innerHTML=t,e.value=t}};if("object"==typeof t&&e.length)for(var a,i=0;a=e[i];i++)n(a,null!==t&&t[i]?t[i]:null);else if(!e.length||e.tagName)n(e,t);else for(var a,i=0;a=e[i];i++)n(a,t)}}function l(e,t,n){e.elements[t]&&(o(e.elements[t],n),ft.set(t,n,e.currentData))}function s(e,t){return e.elements[t]?ft.get(t,r(Array.prototype.concat(e.elements[t]))):void 0}function c(e){return ut[e]?ut[e]:!1}function u(e,t){f(e,t)||(e.className=(e.className+" "+t).trim())}function f(e,t){return RegExp("( |^)"+t+"( |$)","g").test(e.className)}function d(e,t){var n=RegExp("( |^)"+t+"( |$)","g");e.className=e.className.replace(n,function(e,t,n){return t==n?n:""})}function h(e){var t=!this.elements;t&&(this.elements={});for(var n,a=0;n=this.container[a];a++)t&&(this.elements[n.name]?"[object Array]"===Object.prototype.toString.call(this.elements[n.name])?this.elements[n.name].push(n):this.elements[n.name]=Array.prototype.concat(this.elements[n.name],n):this.elements[n.name]=n),e(n)}function v(){h.call(this,function(e){this.setField(e.name,"")}.bind(this))}function g(e,t,n){var a=document.createElement(n.toUpperCase());return a.setAttribute("class","form_"+t+"_"+e),a.setAttribute("name",e),a}function m(e,t){var n=document.createElement("SPAN");return n.className=e,u(n,t),n}function b(e,t,n){var a=this.notificationContainers[e];if(void 0===a[t]){var i=C(this.container,t,e);if(!i){if(!this.fieldContainers[t])return;i=g(t,e,this.fieldContainers[t].tagName),this.fieldContainers[t].parentNode.insertBefore(i,this.fieldContainers[t].nextSibling)}i.children.length||i.appendChild(m(n,this.options.defaults.hideClass)),a[t]=i}return this.notificationContainers[e][t].children[0]}function p(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),!0):e.attachEvent?e.attachEvent("on"+t,n):(t="on"+t,"function"==typeof e[t]&&(n=function(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}(e[t],n)),e[t]=n,!0)}function C(e,t,n){var a;if(!e.allChildren){e.allChildren={};for(var i,r=e.getElementsByTagName("*"),o=0;i=r[o];o++)e.allChildren[i.className]=e.allChildren[i.className]||[],e.allChildren[i.className].push(i)}return a=e.allChildren["form_"+n+"_"+t],a?a&&void 0===a.length?a:1==a.length?a[0]:a[0]?a:null:null}function y(e,t,n){if(n=n||!1,t){var i=e.container;e.errorContainers={},e.warningContainers={},e.fieldContainers={};var r=function(e,t){var n=document.createElement("LABEL");return n.innerHTML=e,n.setAttribute("for",t),n};for(var o in t){var l=o+"",s=t[l],c=s[H];if(c&&(e.fieldContainers[l]=C(i,l,X),e.fieldContainers[l])){e.fieldContainers[l].innerHTML="",d=l+"-"+st++;var u=C(i,l,K);if(s.label&&u){u.innerHTML="";var f=r(s.label,d);n&&f.setAttribute("title",l),u.appendChild(f)}var d,h={};s.data?h=s.data:s.label?h[s.label]=null:h[""]=null,e.fieldContainers[l].innerHTML=function(e,t,n,i,r){var o=[],l=1,s=0;for(var c in e)s++;var u=s>=2;for(var f in e){var d,h=t+(u?"-"+l:""),v={},g=null===e[f]?"":e[f];"select"==n?(0!==c&&void 0===e[""]&&(d='<option value=""></option>',o.push({input:d}),c=0),d='<option value="'+g+'">'+f+"</option>"):(d="text"==n||"hidden"==n||"password"==n||"checkbox"==n||"radio"==n?'<input type="'+n+'" name="'+i+'" id="'+h+'" error-id="'+t+'" value="'+g+'" />':'<textarea name="'+i+'" id="'+h+'" error-id="'+t+'" >'+g+"</textarea>",v.label=r?"":'<label for="'+h+'">'+f+"</label>"),v.input=d,o.push(v),l++}var m=a(n,i,t,o);return m?m:o[0].input}(h,d,c,l,!!u)}}}}function A(a){function i(a){function i(e){return!!e}var c={config:null,defaults:f,initialized:!1,container:null},d=this;if(c.config=c.config||a,d.init=function(n){return c.initialized?(t(J),!1):(i(n)||e(Q),c.config=n,c.initialized=!0,!0)},d.isChanged=!1,d.currentData={},d.initialData={},d.differsObj={},d.config=c.config,d.options=c,d.defaults=f,!i(c.config))return void t(Q);if(c.config[E]&&(c.container=document.getElementById(c.config[E]),c.container||e(et,c.config[E]),d.container=c.container),c.config[x]&&(d.container=c.container=c.config[x],c.config[E]=d.container.getAttribute("id")),d.container){c.config[O]=c.config[O]?c.config[O]|f.flags:f.flags,c.config[S]||(c.config[S]=f.validationType),d.getFormData=function(){return d.currentData},c.config[z]&&c.container.setAttribute(z,c.config[z]),d.action=c.container.getAttribute("action"),d.getFieldValue=function(e){return s(d,e)},d.setField=function(e,t,n){l(d,e,t),n&&m&&m(e,t)},d.setFields=function(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&d.setField(n,e[n],t)},d.getField=function(e){return d.elements[e]},d.validate=function(e){return e?g.field(d,e,d.config[L][e],ft.get(e,d.currentData),f.errorClass,f.warningClass):d.config[_]?d.config[_](d,d.currentData):g.process(d,c.config[L])},d.clear=v.bind(d),d.notificationContainers={},d.notificationContainers[Y]={},d.notificationContainers[Z]={},d.getErrorContainer=function(e){return b.call(d,Y,e,f.errorClass)},d.getWarningContainer=function(e){return b.call(d,Z,e,f.warningClass)};var m=c.config[I]||!1;d.initInputs=function(){var e=c.config[L]||{},t=c.config[R],n=c.config[S],a=c.config[T]||f.onChange,i=function(e,t,n){var i=ft.get(t,this.currentData),r=d.getFieldValue(t),o=ft.get(t,this.initialData);switch(differs(i,r,!0)&&(ft.set(t,r,this.currentData),m&&m(t,r)),n){case nt:"blur"==e.type&&this.validate(t);break;case at:this.validate(t);break;case tt:}var l=differs(this.differsObj,{});differs(o,r,!0)?ft.set(t,!0,this.differsObj):ft.del(t,this.differsObj);var s=differs(this.differsObj,{});l!=s&&(this.isChanged=s,a(s,this))};h.call(d,function(a){void 0===a.hasAttribute&&(a.hasAttribute=function(e){return void 0!==this[e]}),function(){(!a.type||"hidden"!=a.type&&"disabled"!=a.type)&&(a.setAttribute("tabindex",++lt),a.formIndex=a.formIndex||lt)}();var r=a.name,l=ft.get(r,t);if(e[r]){void 0===l&&(l=void 0!==e[r].defaultVal?e[r].defaultVal:"radio"==a.type?null:"");for(var s in e[r]){var c=null;switch(s){case G:case W:if(a.length)for(var f,h=0;f=a[h];h++)f.setAttribute(s,"1");else a.setAttribute(s,"1");break;case B:c=e[r][s];for(var v in c)a.setAttribute(v,c[v]);break;case q:if(c=e[r][s],"string"==typeof c)u(a,c);else try{for(var h=0;h<c.length;h++)u(a,c[h])}catch(g){}}}}if(void 0!==l&&(o(a,l),ft.set(r,l,d.currentData)),!a.initialized){var m=function(e){return function(t){i.call(this,t,e,n)}.bind(this)}.call(d,a.name);p(a,"blur",m),p(a,"click",m),p(a,"keyup",m),a.initialized=!0}})},d.saveChanges=function(){d.differsObj={},d.initialData=cloneObject(d.currentData),(c.config[T]||f.onChange)(!1,d),d.isChanged=!1},d.resetToDefaults=function(e){var t=c.config[L]||{};h.call(d,function(n){if(t[n.name]){var a=t[n.name].defaultVal;t[n.name]&&void 0!==a&&(o(n,a),ft.set(n.name,a,d.currentData),e&&m&&m(n.name,a))}})},d.getAllValues=function(){return r(d.container)},d.currentData=r(d.container),y(d,c.config[L],!!(c.config[O]&k)),d.initInputs(),c.config[M]&&c.config[M](d),n(d),d.saveChanges(),c.config[S]===at&&d.validate(),d.remove=function(){Forms.remove(c.config[E])},d.remove(),ct[c.config[E]]=d}}var f={flags:a.flags||0,validationType:a.validationType||Forms.VALIDATION_ON_SUBMIT,hideClass:a.hideClass||"h",errorClass:a.errorClass||"error",warningClass:a.warningClass||"warning",ajax:a.ajax||function(e,t,n,a,i){var r=new XMLHttpRequest;i=i||function(){},r.open(t,e),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),r.setRequestHeader("X-Requested-With","XMLHttpRequest"),r.send(ft.serialize(n,null)),r.onreadystatechange=function(){200==r.status&&4==r.readyState&&a(!0,r.response),200!=r.status&&i()}},onChange:a.onChange||function(){},formContext:a.formContext||function(){},fieldContext:a.fieldContext||function(){},submitCallback:a.submitCallback||function(e,t,n){return n(),!0},validateCallback:a.validateCallback||function(){return!0},beforeSubmitCallback:a.beforeSubmitCallback||function(e){return e(),!0},afterSubmitCallback:a.afterSubmitCallback||function(){return!0}},g={methods:{},hideError:function(e){e&&u(e,f.hideClass)},showError:function(e,t){e&&(e.innerHTML=t,d(e,f.hideClass))},field:function(e,t,n,a,i,r){var o=!0,l=!0;if(!n)return l;if(n[U])for(var s in n[U])if(Object.prototype.hasOwnProperty.call(n[U],s)){var f=g.methods[s]||c(s);if(f){if(("required"==s||""!=a&&null!==a&&void 0!==a)&&(o=f[it](a,n[U][s])),!o){g.showError(e.getErrorContainer(t),f[rt].supplant({val:n[U][s]})),e.elements[t]&&void 0!==e.elements[t].name&&u(e.elements[t],i),l=!1;break}e.notificationContainers[Y][t]&&g.hideError(e.getErrorContainer(t)),e.elements[t]&&void 0!==e.elements[t].name&&d(e.elements[t],i)}}if(n[$])for(var s in n[$])if(Object.prototype.hasOwnProperty.call(n[$],s)){var f=g.methods[s]||c(s);if(f)if(l){if(("required"==s||""!=a&&null!==a&&void 0!==a)&&(o=f[it](a,n[$][s])),!o){g.showError(e.getWarningContainer(t),f[ot].supplant({val:n[$][s]})),e.elements[t]&&void 0!==e.elements[t].name&&u(e.elements[t],r);break}e.notificationContainers[Z][t]&&g.hideError(e.getWarningContainer(t)),e.elements[t]&&void 0!==e.elements[t].name&&d(e.elements[t],r)}else e.notificationContainers[Z][t]&&g.hideError(e.getWarningContainer(t))}return l},process:function(e,t){var n=!0;for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(t[a][U]||t[a][$])&&(g.field(e,a,t[a],ft.get(a,e.currentData),f.errorClass,f.warningClass)||(n=!1));return n}};if(a.validation)for(var m in a.validation)Object.prototype.hasOwnProperty.call(a.validation,m)&&(g.methods[m]=a.validation[m]);this.create=i}var k=2,w=8,E="id",x="obj",O="flags",N="onSubmit",D="beforeSubmit",j="submitCallback",F="afterSubmit",L="fields",S="validationType",I="onFieldChange",T="onChange",M="onInit",V="onValidate",_="validate",R="data",P="params",z="action",B="attributes",H="type",U="validate",q="class",W="bitmask",G="disabled",$="warning",X="field",Z="warning",Y="error",K="label",Q="No configuration passed",J="Form is initialized already",et="No such element on the page",tt=1,nt=2,at=3,it=2,rt=0,ot=1,lt=0,st=1,ct={},ut={multiple:["Must be a multiple of {val}","Should be a multiple of {val}",function(e,t){return e%t===0}],email:["Wrong email format","Bad email format",function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}],"int":["Must be an integer","Should be an integer",function(e){return parseInt(e,10)==e}],"float":["Must be a decimal","Should be a decimal",function(e){return/^-?\d{0,}([\.|\,]\d{0,})?$/.test(e)}],min:["Must be >= {val}","Value is lower than {val}",function(e,t){return(parseFloat(e)||0)>=(parseFloat(t)||0)}],max:["Must be <= {val}","Value is higher than {val}",function(e,t){return(parseFloat(e)||0)<=(parseFloat(t)||0)}],date:["Wrong date format","Bad date format",function(e){return/^([1-9]|0[1-9]|1[012])[- \/.](0[1-9]|[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d$/.test(e)}],length:["Must be {val} characters long","Should be {val} characters long",function(e,t){return e.length==t}],maxLength:["Must be <= {val} characters long","Should be less than {val} characters long",function(e,t){return e.length<=t}],minLength:["Must be >= {val} characters long","Should be more than {val} characters long",function(e,t){return e.length<=t}],required:["Required field","This field is highly recommended to fill",function(e){return!(""==e||null==e||void 0===e)}]},ft={allReg:/\[([a-zA-Z0-9-]*)\]/g,isObjReg:/\[(.*)\]/g,getPath:function(e){var t=e.replace(ft.isObjReg,""),n=[];t&&n.push(t);for(var a;a=ft.allReg.exec(e);)n.push(a[1]);return n},serialize:function(e,t){var n=[];for(var a in e){var i=t?t+"["+a+"]":a,r=e[a];n.push("object"==typeof r&&null!==r?ft.serialize(r,i):encodeURIComponent(i)+"="+(null===r?"":encodeURIComponent(r)))}return n.join("&")},getOrDel:function(e,t,n){var a=this.getPath(e);if(void 0===t||void 0===t[a[0]])return void 0;for(var i,r,o=t,l=0;l<a.length;l++)if(void 0!==o[a[l]]){if(""==o[a[l]])return n?delete o[a[l]]:o[a[l]];i=o,r=a[l],o=o[a[l]]}return n?delete i[r]:o},del:function(e,t){return this.getOrDel(e,t,!0)},get:function(e,t){return this.getOrDel(e,t)},setVal:function(e,t,n){if(e.length){var a=e.shift(),i=e[0],r=n;if(void 0===i){if(""==a)return n.push?void n.push(t):!1;if(void 0===n)return;return void(n[a]=t)}""==a&&(r.push||(r=[]),r.push(""==i?[]:{}),a=r.length-1),r=r[a]="object"==typeof r[a]&&null!==r[a]?r[a]:""==i?[]:{},ft.setVal(e,t,r)}},set:function(e,t,n){var a=this.getPath(e);ft.setVal(a,t,n)}};return function(e,t){void 0!==window.Element&&(e[t]||(e[t]=function(e){return this.querySelectorAll("."+e)},Element.prototype[t]=e[t]))}(document,"getElementsByClassName"),{Form:A,remove:function(e){ct[e]&&delete ct[e]},getList:function(){return ct},VALIDATION_ON_SUBMIT:tt,VALIDATION_ON_CHANGE:nt,VALIDATION_ASAP:at,FLAG_DEBUG:k,FLAG_ASYNC:w}}();