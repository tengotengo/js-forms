Forms=function(){function U(a,b){if(typeof a==typeof b&&("string"==typeof b||"number"==typeof b))return a!=b;if("object"==typeof a&&"object"==typeof b){var c;for(c in a)if(U(a[c],b[c]))return!0;for(c in b)if(U(a[c],b[c]))return!0}else if(typeof a!=typeof b)return!0;return!1}function V(){throw new Error(Array.prototype.slice.call(arguments).join(", "))}function W(){console.log(Array.prototype.slice.call(arguments).join(", "))}function X(a,b){if(a){var c=function(a,b){var c=a.tagName.toLowerCase();switch(c){case"select":for(var g,d=a.children,e=!1,f=0;g=d[f];f++)b!=g.value?(g.removeAttribute("selected"),g.selected=!1):(g.setAttribute("selected","1"),g.selected=!0,e=!0);e||(a.selectedIndex=-1);break;case"input":switch(a.type){case"radio":b==a.value?(a.setAttribute("checked","true"),a.checked=!0):(a.removeAttribute("checked"),a.checked=!1);break;case"password":case"hidden":case"text":"object"==typeof b?(a.setAttribute("value",b),a.value=b):(a.setAttribute("value",b),a.value=b);break;case"checkbox":var h=a.hasAttribute("bitmask");h&&a.value&b||b&&"0"!==b&&"!1"!==b&&!h?(a.setAttribute("checked","true"),a.checked=!0):(a.removeAttribute("checked"),a.checked=!1)}break;case"textarea":a.innerHTML=b,a.value=b}};if("object"==typeof b&&a.length)for(var e,d=0;e=a[d];d++)c(e,null!==b&&b[d]?b[d]:null);else if(!a.length||a.tagName)c(a,b);else for(var e,d=0;e=a[d];d++)c(e,b)}}function ab(a,b){var c={};if(!a.length)return c;for(var e,d=0;e=a[d];d++){var f=e.name,g=function(a){var b=a.name,c=a.type,d=a.tagName.toLowerCase();if(!b||a.disabled||"reset"==c||"button"==c||("checkbox"==c||"radio"==c)&&!a.checked||("submit"==c||"image"==c)&&a.form&&a.form.clk!=a||"select"==d&&-1==a.selectedIndex)return null;switch(d){case"select":var e=a.selectedIndex;if(0>e)return null;for(var f=[],g=a.options,h="select-one"==c,i=h?e+1:g.length,j=h?e:0;i>j;j++){var k=g[j];if(k.selected){var l=k.value;if(l||(l=k.attributes&&k.attributes.value&&!k.attributes.value.specified?k.text:k.value),h)return l;f.push(l)}}return f;case"input":switch(c){case"radio":return""===a.value?null:a.value;case"checkbox":return a.hasAttribute("value")?""===a.value?1:a.value:1;case"text":case"password":case"hidden":return""===a.value?null:a.value}break;case"textarea":return""===a.value?null:a.value}return!1};if(f&&!e.disabled&&!Z(e,"default-text")){var h=g(e);b&&void 0===_.get(f,c)&&null===h&&_.set(f,null,c),null!==h&&(b||""!==h&&null!==h&&void 0!==h)&&(e.hasAttribute("bitmask")?(h=parseInt(h,10)||0,(0!==h||b)&&(c[f]|=h)):_.set(f,h,c))}}return c}function bb(a,b,c){var d=document.createElement(c.toUpperCase());return d.setAttribute("class","form_"+b+"_"+a),d.setAttribute("name",a),d}function cb(a){var b=document.createElement("SPAN");return b.className=a,Y(b,c.hideClass),b}function db(a,b,c){return a.addEventListener?(a.addEventListener(b,c,!1),!0):a.attachEvent?a.attachEvent("on"+b,c):(b="on"+b,"function"==typeof a[b]&&(c=function(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}}(a[b],c)),a[b]=c,!0)}function eb(a){if(!(a.config[k]&g))return a.submit=function(){a.container.submit.call(a.container)},void 0;var b=function(b){var d=a.config[n]||c.submitCallback,e=a.config[u]||c.validateCallback,f=a.config[m]||c.beforeSubmitCallback,g=a.config[p]||c.afterSubmitCallback,h=a.config[l]||function(b){b=b||function(){};var f=a.validate();if(e(f),f){var g=a.getFormData();if(a.config[x])for(var h in a.config[x])g[h]=a.config[x][h];return c.ajax(a.action,"POST",g,function(b){return function(c,e){d.call(a,c,e,b)}}(b)),a.saveChanges(),!0}return!1};f(function(){h(b)&&g()})};a.container.submit=a.submit=b,db(a.container,"submit",function(a){return a.preventDefault&&a.preventDefault(),b(),a.returnValue=!1,!1})}function fb(a,b){if(void 0!==a){var c;if(document.createEvent){if(c=document.createEvent("MouseEvents"),c.initEvent(b,!0,!1),a.length&&void 0==a.name){for(var d=0;d<a.length;d++)a[d].dispatchEvent(c);return}a.dispatchEvent(c)}else if(document.createEventObject){if(c=document.createEventObject(),void 0===a.fireEvent||"function"!=typeof a.fireEvent)return;a.fireEvent("on"+b,c)}}}function gb(a){var b=!this.elements;b&&(this.elements={});for(var d,c=0;d=this.container[c];c++)b&&(this.elements[d.name]?"[object Array]"===Object.prototype.toString.call(this.elements[d.name])?this.elements[d.name].push(d):this.elements[d.name]=Array.prototype.concat(this.elements[d.name],d):this.elements[d.name]=d),a(d)}function hb(a,b,c){var d;if(!a.allChildren){a.allChildren={};for(var g,e=a.getElementsByTagName("*"),f=0;g=e[f];f++)a.allChildren[g.className]=a.allChildren[g.className]||[],a.allChildren[g.className].push(g)}return d=a.allChildren["form_"+c+"_"+b],d?d&&void 0===d.length?d:1==d.length?d[0]:d[0]?d:null:null}function ib(b,d,e,f,g){if(f=f||!1,e=e||!1,g=g||c.templateFast,d){var h=b.container;b.errorContainers={},b.warningContainers={},b.fieldContainers={};var k=function(a,b){var c=document.createElement("LABEL");return c.innerHTML=a,c.setAttribute("for",b),c};for(var l in d){var m=l+"",n=d[m],o=n[A];if(o&&(b.fieldContainers[m]=hb(h,m,G),b.fieldContainers[m])){b.fieldContainers[m].innerHTML="",r=e?m+"-"+a++:m;var p=hb(h,m,J);if(n.label&&p){p.innerHTML="";var q=k(n.label,r);f&&q.setAttribute("title",m),p.appendChild(q)}var r,s={};n.data?s=n.data:n.label?s[n.label]=null:s[""]=null,b.fieldContainers[m].innerHTML=function(a,b,c,d,e,f){var g=[],h=1,i=0;for(var j in a)i++;var k=i>=2;for(var l in a){var n,m=b+(k?"-"+h:""),o={},p=null===a[l]?"":a[l];"select"==c?(0!==j&&(n='<option value=""></option>',g.push({input:n}),j=0),n='<option value="'+p+'">'+l+"</option>"):(n="text"==c||"hidden"==c||"password"==c||"checkbox"==c||"radio"==c?'<input type="'+c+'" name="'+d+'" id="'+m+'" error-id="'+b+'" value="'+p+'" />':'<textarea name="'+d+'" id="'+m+'" error-id="'+b+'" >'+p+"</textarea>",o.label=e?"":'<label for="'+m+'">'+l+"</label>"),o.input=n,g.push(o),h++}return f[c]?f[c](d,b,g):g[0].input}(s,r,o,m,!!p,g)}}}}function jb(a,b){var d=this.notificationContainers[a];if(void 0===d[b]){var e=hb(this.container,b,a);if(!e){if(!this.fieldContainers[b])return;e=bb(b,a,this.fieldContainers[b].tagName),this.fieldContainers[b].parentNode.insertBefore(e,this.fieldContainers[b].nextSibling)}e.children.length||e.appendChild(cb(this.config[a+"Class"]||c.classes[a])),d[b]=e}return this.notificationContainers[a][b].children[0]}function kb(){gb.call(this,function(a){this.setField(a.name,"")}.bind(this))}Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d&&a?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e}),String.prototype.supplant=function(a,b){return this.replace(/{([^{}]*)}/g,function(c,d){return void 0!=a[d]?a[d]:b?"":c})};var a=1,b={},c={hideClass:"h",classes:{error:"error",warning:"warning"},errorClass:"error",warningClass:"warning",templateFast:{select:function(a,b,c){for(var d='<select name="'+a+'" id="'+b+'">',e=0;e<c.length;e++)d+=c[e].input;return d+="</select>"},radio:function(a,b,c){for(var d='<table cellpadding="0" cellspacing="0" class="radio-table">',e=0;e<c.length;e++)d+='<tr><td class="radiobutton">'+c[e].input+"</td>"+'<td class="radio_label">'+c[e].label+"</td>"+"</tr>";return d+="</table>"},checkbox:function(a,b,c){for(var d='<table cellpadding="0" cellspacing="0" class="checkbox-table">',e=0;e<c.length;e++)d+='<tr><td class="checkbox">'+c[e].input+"</td>"+'<td class="checkbox_label">'+c[e].label+"</td>"+"</tr>";return d+="</table>"}},ajax:function(a,b,c,d,e){var f=new XMLHttpRequest;e=e||function(){},f.open(b,a),f.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.send(_.serialize(c,null)),f.onreadystatechange=function(){200==f.status&&4==f.readyState&&d(f.response),200!=f.status&&e()}},onChange:function(){},submitCallback:function(a,b,c){return c(),!0},validateCallback:function(){return!0},beforeSubmitCallback:function(a){return a(),!0},afterSubmitCallback:function(){return!0}},d=1,e=2,f=4,g=8,h="id",i="obj",k="flags",l="onSubmit",m="beforeSubmit",n="submitCallback",p="afterSubmit",q="fields",r="validationType",s="onFieldChange",t="onChange",u="onValidate",v="data",w="templates",x="params",y="action",z="attributes",A="type",B="validate",C="class",D="bitmask",E="disabled",F="warning",G="field",H="warning",I="error",J="label",K="No configuration passed",L="Form is initialized already",M="No such element on the page",N=1,O=2,P=3,Q=2,R=0,S=1,T={setWarningMessage:function(a,b){T.methods[a]||(T.methods[a]=[]),T.methods[a][S]=b},setErrorMessage:function(a,b){T.methods[a]||(T.methods[a]=[]),T.methods[a][R]=b},setTestFunction:function(a,b){T.methods[a]||(T.methods[a]=[]),T.methods[a][Q]=b},set:function(a,b){T.methods[a]=b},remove:function(a){delete T.methods[a]},methods:{multiple:["Must be a multiple of {val}","Should be a multiple of {val}",function(a,b){return 0===a%b}],email:["Wrong email format","Bad email format",function(a){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(a)}],"int":["Must be an integer","Should be an integer",function(a){return parseInt(a,10)==a}],"float":["Must be a decimal","Should be a decimal",function(a){return/^-?\d{0,}([\.|\,]\d{0,})?$/.test(a)}],min:["Must be >= {val}","Value is lower than {val}",function(a,b){return(parseFloat(a)||0)>=(parseFloat(b)||0)}],max:["Must be <= {val}","Value is higher than {val}",function(a,b){return(parseFloat(a)||0)<=(parseFloat(b)||0)}],date:["Wrong date format","Bad date format",function(a){return/^([1-9]|0[1-9]|1[012])[- \/.](0[1-9]|[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d$/.test(a)}],length:["Must be {val} characters long","Should be {val} characters long",function(a,b){return a.length==b}],maxLength:["Must be <= {val} characters long","Should be less than {val} characters long",function(a,b){return a.length<=b}],minLength:["Must be >= {val} characters long","Should be more than {val} characters long",function(a,b){return a.length<=b}],required:["Required field","This field is highly recommended to fill",function(a){return!(""==a||null==a||void 0==typeof a)}]},hideError:function(a){a&&Y(a,c.hideClass)},showError:function(a,b){a&&(a.innerHTML=b,$(a,c.hideClass))},field:function(a,b,c,d,e,f){var g=!0,h=!0;if(c[B])for(var i in c[B])if(Object.prototype.hasOwnProperty.call(c[B],i)&&void 0!=T.methods[i]){if(("required"==i||""!=d&&null!==d&&void 0!==typeof d)&&(g=T.methods[i][Q](d,c[B][i])),!g){T.showError(a.getErrorContainer(b),T.methods[i][R].supplant({val:c[B][i]})),void 0!==a.container[b].name&&Y(a.container[b],e),h=!1;break}a.notificationContainers[I][b]&&T.hideError(a.getErrorContainer(b)),void 0!==a.container[b].name&&$(a.container[b],e)}if(c[F])for(var i in c[F])if(Object.prototype.hasOwnProperty.call(c[F],i)&&T.methods[i])if(h){if(("required"==i||""!=d&&null!==d&&void 0!==typeof d)&&(g=T.methods[i][Q](d,c[F][i])),!g){T.showError(a.getWarningContainer(b),T.methods[i][S].supplant({val:c[F][i]})),void 0!==a.container[b].name&&Y(a.container[b],f);break}a.notificationContainers[H][b]&&T.hideError(a.getWarningContainer(b)),void 0!==a.container[b].name&&$(a.container[b],f)}else a.notificationContainers[H][b]&&T.hideError(a.getWarningContainer(b));return h},process:function(a,b){var d=a.getFormData(),e=!0;for(var f in b)Object.prototype.hasOwnProperty.call(b,f)&&(b[f][B]||b[f][F])&&(T.field(a,f,b[f],d[f],a.config.errorClass||c.classes.error,a.config.warningClass||c.classes.warning)||(e=!1));return e}},Y=function(a,b){Z(a,b)||(a.className=(a.className+" "+b).trim())},Z=function(a,b){return new RegExp("( |^)"+b+"( |$)","g").test(a.className)},$=function(a,b){var c=new RegExp("( |^)"+b+"( |$)","g");a.className=a.className.replace(c,function(a,b,c){return b==c?c:""})},_={allReg:/\[([a-zA-Z0-9-]*)\]/g,isObjReg:/\[(.*)\]/g,serialize:function(a,b){var c=[];for(var d in a){var e=b?b+"["+d+"]":d,f=a[d];c.push("object"==typeof f&&null!==f?_.serialize(f,e):encodeURIComponent(e)+"="+(null===f?"":encodeURIComponent(f)))}return c.join("&")},get:function(a,b){for(var d,c=[a.replace(_.isObjReg,"")];d=_.allReg.exec(a);)c.push(d[1]);if(void 0===b||void 0===b[c[0]])return void 0;for(var e=b,f=0;f<c.length;f++)if(void 0!==e[c[f]]){if(""==e[c[f]])return e[c[f]];e=e[c[f]]}return e},setVal:function(a,b,c){if(a.length){var d=a.shift(),e=a[0],f=c;if(void 0===e){if(""==d)return c.push?(c.push(b),void 0):!1;if(void 0===c)return;return c[d]=b,void 0}""==d&&(f.push||(f=[]),f.push(""==e?[]:{}),d=f.length-1),f=f[d]="object"==typeof f[d]&&null!==f[d]?f[d]:""==e?[]:{},_.setVal(a,b,f)}},set:function(a,b,c){var d=a.replace(_.isObjReg,""),e=[];d&&e.push(d);for(var f;f=_.allReg.exec(a);)e.push(f[1]);_.setVal(e,b,c)}};return function(a,b){void 0!==window.Element&&(a[b]||(a[b]=function(a){return this.querySelectorAll("."+a)},Element.prototype[b]=a[b]))}(document,"getElementsByClassName"),{Form:function(a){function l(a){return!!a}var g={cache:null,config:a||null,initialized:!1,valuesCache:null,container:null},j=this;if(j.init=function(a){return g.initialized?(W(L),!1):(l(a)||V(K),g.config=a,g.initialized=!0,!0)},j.isChanged=!1,j.config=g.config,!l(g.config))return W(K),void 0;if(g.config[h]&&(g.container=document.getElementById(g.config[h]),g.container||V(M,g.config[h]),j.container=g.container),g.config[i]&&(j.container=g.container=g.config[i],g.config[h]=j.container.getAttribute("id")),j.container){var m=null,n=!!(g.config[k]&f);j.getFormData=function(a){return!m||j.isChanged||a?m=ab(j.container,n):m},g.config[y]&&g.container.setAttribute(y,g.config[y]),j.ignoreList={},j.action=g.container.getAttribute("action"),j.setField=function(a,b){j.elements[a]&&(X(j.elements[a],b),fb(j.elements[a],"formChange"))},j.getField=function(a){return j.container[a]},j.validate=function(a){if(a){var b=j.getFormData(!0);return T.field(j,a,g.config[q][a],b[a],j.config.errorClass||c.classes.error,j.config.warningClass||c.classes.warning)}return T.process(j,g.config[q])},j.clear=kb.bind(j),j.notificationContainers={},j.notificationContainers[I]={},j.notificationContainers[H]={},j.getErrorContainer=function(a){return jb.call(j,I,a)},j.getWarningContainer=function(a){return jb.call(j,H,a)};var o={};j.initInputs=function(){var a=0,b=g.config[q],d=g.config[v],e=g.config[r]||Forms.VALIDATION_ON_SUBMIT,f=!1,h=function(a,b,d){switch(d){case Forms.VALIDATION_ON_CHANGE:"blur"==a.type&&this.validate(b);break;case Forms.VALIDATION_ON_KEYUP:this.validate(b)}var e=this.config[t]||c.onChange,g=this.config[s]||function(){},h=_.get(b,this.valuesCache),i=_.get(b,this.getFieldValue(b)),j=U(h,i);j?o[b]=1:delete o[b],this.isChanged="{}"!==JSON.stringify(o),this.isChanged!=f&&(e(this.isChanged,this),f=!!this.isChanged),j&&g(b,i)};gb.call(j,function(c){void 0===c.hasAttribute&&(c.hasAttribute=function(a){return"undefined"!=typeof this[a]});var f=c.name;if(d){var g=_.get(f,d);void 0!==g&&X(c,g)}if(b[f]){void 0!==b[f].defaultVal&&X(c,b[f].defaultVal);for(var i in b[f]){var k=null;switch(i){case E:case D:if(c.length)for(var m,l=0;m=c[l];l++)m.setAttribute(i,"1");else c.setAttribute(i,"1");break;case z:k=b[f][i];for(var n in k)c.setAttribute(n,k[n]);break;case C:if(k=b[f][i],"string"==typeof k)Y(c,k);else try{for(var l=0;l<k.length;l++)Y(c,k[l])}catch(o){}}}}if(!c.initialized){var p=function(a){return function(b){h.call(this,b,a,e)}.bind(this)}.call(j,c.name);db(c,"blur",p),db(c,"click",p),db(c,"keyup",p),db(c,"formChange",p),c.initialized=!0}(!c.type||"hidden"!=c.type&&"disabled"!=c.type)&&c.setAttribute("tabindex",++a)})},j.saveChanges=function(){o={},j.valuesCache=j.getFormData(),(g.config[t]||c.onChange)(!1,j),j.isChanged=!1},ib(j,g.config[q],!!(g.config[k]&d),!!(g.config[k]&e),g.config[w]),j.initInputs(),j.valuesCache=j.getFormData(),eb(j),j.saveChanges(),j.getFieldValue=function(a){return j.elements[a]?ab(Array.prototype.concat(j.elements[a]),n):void 0},g.config[r]===P&&j.validate(),j.remove=function(){Forms.remove(g.config[h])},j.remove(),b[g.config[h]]=j}},VALIDATION_ON_SUBMIT:N,VALIDATION_ON_CHANGE:O,VALIDATION_ON_KEYUP:P,FLAG_DEBUG:e,FLAG_SUBMIT_EMPTY:f,FLAG_UNIQUE_LABELS:d,FLAG_ASYNC:g,defaults:c,remove:function(a){b[a]&&delete b[a]},validation:{setWarningMessage:T.setWarningMessage,setErrorMessage:T.setErrorMessage,setTestFunction:T.setTestFunction,set:T.set,remove:T.remove},getList:function(){return b}}}();